{"version":3,"sources":["model/database.js","model/model.js","components/Contexts/MessagesContext.js","components/Contexts/UserContext.js","components/ChatContainer/FormsContainer/LoginForm.js","components/ChatContainer/FormsContainer/MessageForm.js","components/ChatContainer/FormsContainer/FormsContainer.js","components/ChatContainer/MessagesContainer/Message.js","components/ChatContainer/MessagesContainer/MessagesContainer.js","components/ChatContainer/ChatContainer.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","bcryptjs","require","getMessages","setMessages","a","collection","orderBy","onSnapshot","querySnapshot","chatHistory","forEach","doc","push","id","data","console","log","Error","saveMessages","message","set","usernameAvailable","username","where","get","usernameList","docs","length","saveNewUser","newUser","hash","password","verifyPassword","usersDocs","userLogged","user","compare","verifyUser","users","saveUserPrefs","nickname","color","update","deleteMessageFromDb","delete","MessagesContext","createContext","useMessagesContext","useContext","MessagesProvider","children","useState","loadingMessages","setloadingMessages","messages","notification","setNotification","loadMessages","setTimeout","sendMessage","newMessage","date","Date","deleteMessage","useEffect","Provider","value","UserContext","useUserContext","UserProvider","setUserLogged","adminLogged","setAdminLogged","userPrefs","setUserPrefs","registerUser","loginUser","userData","admin","changeUserPrefs","logOutUser","LoginForm","setUser","onChange","e","target","name","validateInputs","className","htmlFor","type","onClick","preventDefault","MessageForm","setNewMessage","handleSubmit","colorOption","document","querySelector","selected","onSubmit","disabled","cols","rows","onKeyPress","which","keyCode","shiftKey","FormsContainer","Message","displayDelete","handleDelete","size","MessagesContainer","messagesContainer","scrollTo","scrollHeight","map","ChatContainer","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.feee2a96.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyB3eTixPwzFobVTrmom_vQpOnP3wZ5hkuA\",\r\n\tauthDomain: \"react-chat-9e283.firebaseapp.com\",\r\n\tdatabaseURL: \"https://react-chat-9e283-default-rtdb.firebaseio.com\",\r\n\tprojectId: \"react-chat-9e283\",\r\n\tstorageBucket: \"react-chat-9e283.appspot.com\",\r\n\tmessagingSenderId: \"178991264140\",\r\n\tappId: \"1:178991264140:web:bdfebce71e614ef73626a9\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const db = firebase.firestore();\r\n","import { db } from \"./database.js\";\r\nconst bcryptjs = require(\"bcryptjs\");\r\n\r\nasync function getMessages(setMessages) {\r\n\ttry {\r\n\t\tdb.collection(\"messages\")\r\n\t\t\t.orderBy(\"date\", \"asc\")\r\n\t\t\t.onSnapshot((querySnapshot) => {\r\n\t\t\t\tconst chatHistory = [];\r\n\r\n\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\tchatHistory.push({ id: doc.id, ...doc.data() });\r\n\t\t\t\t});\r\n\t\t\t\tsetMessages(chatHistory);\r\n\t\t\t});\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"Los mensajes no se pudieron cargar\");\r\n\t}\r\n}\r\n\r\nasync function saveMessages(message) {\r\n\ttry {\r\n\t\tawait db.collection(\"messages\").doc().set(message);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El mensaje no se pudo enviar.\");\r\n\t}\r\n}\r\n\r\nasync function usernameAvailable(username) {\r\n\ttry {\r\n\t\tconst usernameList = await db.collection(\"users\").where(\"username\", \"==\", username).get();\r\n\t\treturn usernameList.docs.length === 0 ? true : false;\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El nombre de usuario no se pudo validar.\");\r\n\t}\r\n}\r\n\r\nasync function saveNewUser(newUser) {\r\n\ttry {\r\n\t\tnewUser.password = await bcryptjs.hash(newUser.password, 8);\r\n\t\tawait db.collection(\"users\").doc().set(newUser);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El usuario no se pudo registrar.\");\r\n\t}\r\n}\r\n\r\nasync function verifyPassword(usersDocs, password) {\r\n\ttry {\r\n\t\tlet userLogged = false;\r\n\r\n\t\tfor (const user of usersDocs) {\r\n\t\t\tif (await bcryptjs.compare(password, user.data().password)) userLogged = { id: user.id, ...user.data() };\r\n\t\t}\r\n\r\n\t\treturn userLogged;\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"La contraseña no se pudo validar.\");\r\n\t}\r\n}\r\n\r\nasync function verifyUser({ username, password }) {\r\n\ttry {\r\n\t\tconst users = await db.collection(\"users\").where(\"username\", \"==\", username).get();\r\n\r\n\t\tif (users.docs) {\r\n\t\t\treturn verifyPassword(users.docs, password);\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El usuario no se pudo validar.\");\r\n\t}\r\n}\r\n\r\nasync function saveUserPrefs(id, nickname, color) {\r\n\ttry {\r\n\t\tawait db.collection(\"users\").doc(id).update({ nickname: nickname, color: color });\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"No se pudieron guardar las preferencias.\");\r\n\t}\r\n}\r\n\r\nasync function deleteMessageFromDb(id) {\r\n\ttry {\r\n\t\tawait db.collection(\"messages\").doc(id).delete();\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"No se pudo eliminar el mensaje.\");\r\n\t}\r\n}\r\n\r\nexport { getMessages, saveMessages, saveNewUser, verifyUser, saveUserPrefs, deleteMessageFromDb, usernameAvailable };\r\n","import React, { createContext, useContext, useState, useEffect } from \"react\";\r\nimport { getMessages, saveMessages, deleteMessageFromDb } from \"../../model/model.js\";\r\n\r\nexport const MessagesContext = createContext();\r\nexport const useMessagesContext = () => useContext(MessagesContext);\r\n\r\nexport function MessagesProvider({ children }) {\r\n\tconst [loadingMessages, setloadingMessages] = useState(true);\r\n\tconst [messages, setMessages] = useState([]);\r\n\tconst [notification, setNotification] = useState(\"\");\r\n\r\n\tconst loadMessages = async () => {\r\n\t\ttry {\r\n\t\t\tawait getMessages(setMessages);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetloadingMessages(false);\r\n\t\t\t}, 500);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst sendMessage = async (newMessage) => {\r\n\t\tsetNotification(\"\");\r\n\r\n\t\tconst message = {\r\n\t\t\tdate: new Date(),\r\n\t\t\tnickname: newMessage.nickname,\r\n\t\t\tcolor: newMessage.color,\r\n\t\t\tmessage: newMessage.message,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tawait saveMessages(message);\r\n\t\t\tsetNotification(\"Mensaje enviado\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteMessage = async (id) => {\r\n\t\tsetNotification(\"\");\r\n\r\n\t\ttry {\r\n\t\t\tawait deleteMessageFromDb(id);\r\n\t\t\tsetNotification(\"Mensaje eliminado.\");\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(\"No se pudo eliminar el mensaje.\");\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tloadMessages();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<MessagesContext.Provider\r\n\t\t\tvalue={{ loadingMessages, messages, notification, setNotification, sendMessage, deleteMessage }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</MessagesContext.Provider>\r\n\t);\r\n}\r\n","import React, { createContext, useContext, useState } from \"react\";\r\nimport { usernameAvailable, saveNewUser, saveUserPrefs, verifyUser } from \"../../model/model\";\r\n\r\nexport const UserContext = createContext();\r\nexport const useUserContext = () => useContext(UserContext);\r\n\r\nexport function UserProvider({ children }) {\r\n\tconst [notification, setNotification] = useState(\"\");\r\n\tconst [userLogged, setUserLogged] = useState(false);\r\n\tconst [adminLogged, setAdminLogged] = useState(false);\r\n\tconst [userPrefs, setUserPrefs] = useState({ id: \"\", nickname: \"\", color: \"white\" });\r\n\r\n\tconst registerUser = async (newUser) => {\r\n\t\tsetNotification(\"\");\r\n\t\tsetUserLogged(false);\r\n\r\n\t\ttry {\r\n\t\t\tif (await usernameAvailable(newUser.username)) {\r\n\t\t\t\tawait saveNewUser({ ...newUser, nickname: \"\", color: \"white\" });\r\n\t\t\t\tsetNotification(\"Usuario creado. Logueate!\");\r\n\t\t\t} else {\r\n\t\t\t\tsetNotification(\"Usuario no disponible.\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst loginUser = async (user) => {\r\n\t\tsetNotification(\"\");\r\n\t\tsetUserLogged(false);\r\n\r\n\t\ttry {\r\n\t\t\tconst userData = await verifyUser(user);\r\n\r\n\t\t\tif (userData) {\r\n\t\t\t\tsetUserPrefs({ id: userData.id, nickname: userData.nickname, color: userData.color });\r\n\t\t\t\tsetUserLogged(true);\r\n\t\t\t\tsetAdminLogged(userData.admin === true);\r\n\t\t\t\tsetNotification(\"Has iniciado sesión!\");\r\n\t\t\t} else {\r\n\t\t\t\tsetNotification(\"Usuario o contraseña incorrecto/s.\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst logOutUser = () => {\r\n\t\tsetUserLogged(false);\r\n\t\tsetUserPrefs({ id: \"\", nickname: \"\", color: \"white\" });\r\n\t\tsetNotification(\"Ha cerrado sesión.\");\r\n\t};\r\n\r\n\tconst changeUserPrefs = async (nickname, color) => {\r\n\t\ttry {\r\n\t\t\tawait saveUserPrefs(userPrefs.id, nickname, color);\r\n\t\t\tsetUserPrefs({ nickname: nickname, color: color });\r\n\t\t\tsetNotification(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(\"No se pudieron guardar las preferencias.\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<UserContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tnotification,\r\n\t\t\t\tsetNotification,\r\n\t\t\t\tregisterUser,\r\n\t\t\t\tloginUser,\r\n\t\t\t\tuserLogged,\r\n\t\t\t\tadminLogged,\r\n\t\t\t\tuserPrefs,\r\n\t\t\t\tlogOutUser,\r\n\t\t\t\tchangeUserPrefs,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</UserContext.Provider>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useUserContext } from \"../../Contexts/UserContext\";\r\nimport \"./LoginForm.scss\";\r\n\r\nexport default function LoginForm() {\r\n\tconst { registerUser, loginUser, notification, setNotification } = useUserContext();\r\n\r\n\tconst [user, setUser] = useState({\r\n\t\tusername: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\r\n\tconst onChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tsetUser({ ...user, [name]: value });\r\n\t};\r\n\r\n\tconst validateInputs = () => {\r\n\t\tif (!user.username) {\r\n\t\t\tsetNotification(\"El usuario está vacío.\");\r\n\t\t\treturn false;\r\n\t\t} else if (!user.password) {\r\n\t\t\tsetNotification(\"La contraseña está vacía.\");\r\n\t\t\treturn false;\r\n\t\t} else return true;\r\n\t};\r\n\r\n\tconst handleRegister = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (validateInputs()) {\r\n\t\t\tregisterUser(user);\r\n\t\t\tsetUser({ ...user, password: \"\" });\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLogin = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (validateInputs()) {\r\n\t\t\tloginUser(user);\r\n\t\t\tsetUser({ ...user, password: \"\" });\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form className={\"loginForm\"}>\r\n\t\t\t<fieldset className={\"loginData\"}>\r\n\t\t\t\t<label htmlFor=\"username\">Usuario</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"usernameInput\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tvalue={user.username}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor=\"password\">Contraseña</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"passwordInput\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\tvalue={user.password}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\t\t\t</fieldset>\r\n\r\n\t\t\t<div className={\"buttonsDiv\"}>\r\n\t\t\t\t<button onClick={handleLogin}> Login </button>\r\n\t\t\t\t<button onClick={handleRegister}> Registrarse </button>\r\n\t\t\t</div>\r\n\t\t\t<p className=\"notification\">{notification}</p>\r\n\t\t</form>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useUserContext } from \"../../Contexts/UserContext\";\r\nimport { useMessagesContext } from \"../../Contexts/MessagesContext\";\r\nimport \"./MessageForm.scss\";\r\n\r\nexport default function MessageForm() {\r\n\tconst { userLogged, userPrefs, logOutUser, changeUserPrefs } = useUserContext();\r\n\tconst { loadingMessages, notification, setNotification, sendMessage } = useMessagesContext();\r\n\r\n\tconst [newMessage, setNewMessage] = useState({\r\n\t\tnickname: \"\",\r\n\t\tcolor: \"white\",\r\n\t\tmessage: \"\",\r\n\t});\r\n\r\n\tconst onKeyPress = (e) => {\r\n\t\tconst keyCode = e.which || e.keyCode;\r\n\r\n\t\tif (keyCode === 13 && !e.shiftKey) {\r\n\t\t\te.preventDefault();\r\n\t\t\thandleSubmit();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetNewMessage({ ...newMessage, [name]: value });\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\tif (e) e.preventDefault();\r\n\r\n\t\tif (loadingMessages) return;\r\n\t\tif (!newMessage.nickname) return setNotification(\"No ha ingresado un nickname.\");\r\n\t\tif (!newMessage.message) return setNotification(\"No ha escrito ningún mensaje.\");\r\n\r\n\t\tsendMessage(newMessage);\r\n\t\tsetNewMessage({ ...newMessage, message: \"\" });\r\n\t\tchangeUserPrefs(newMessage.nickname, newMessage.color);\r\n\t};\r\n\r\n\tconst handleLogOut = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlogOutUser();\r\n\t};\r\n\r\n\t//SETS USER NICKNAME AND COLOR\r\n\tuseEffect(() => {\r\n\t\tsetNewMessage({ nickname: userPrefs.nickname, color: userPrefs.color, message: \"\" });\r\n\t}, [userPrefs]);\r\n\r\n\t//SETS COLOR SELECTED\r\n\tuseEffect(() => {\r\n\t\tconst colorOption = document.querySelector(`.colorPicker option[value=${newMessage.color}]`);\r\n\t\tcolorOption && (colorOption.selected = true);\r\n\t}, [newMessage.color]);\r\n\r\n\treturn (\r\n\t\t<form className=\"messageForm\" onSubmit={handleSubmit}>\r\n\t\t\t<fieldset className=\"transmiterData\">\r\n\t\t\t\t<div className=\"nicknameDiv\">\r\n\t\t\t\t\t<label htmlFor=\"nickname\">Nickname</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tdisabled={!userLogged}\r\n\t\t\t\t\t\tclassName=\"nicknameInput\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tid=\"nickname\"\r\n\t\t\t\t\t\tname=\"nickname\"\r\n\t\t\t\t\t\tvalue={newMessage.nickname}\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<select disabled={!userLogged} className=\"colorPicker\" name=\"color\" id=\"color\" onChange={onChange}>\r\n\t\t\t\t\t<option value=\"white\">⚪</option>\r\n\t\t\t\t\t<option value=\"red\">🔴</option>\r\n\t\t\t\t\t<option value=\"green\">🟢</option>\r\n\t\t\t\t\t<option value=\"orange\">🟠</option>\r\n\t\t\t\t\t<option value=\"yellow\">🟡</option>\r\n\t\t\t\t\t<option value=\"blue\">🔵</option>\r\n\t\t\t\t\t<option value=\"blueviolet\">🟣</option>\r\n\t\t\t\t</select>\r\n\t\t\t</fieldset>\r\n\t\t\t<fieldset>\r\n\t\t\t\t<label htmlFor=\"message\"> Message </label>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tdisabled={!userLogged}\r\n\t\t\t\t\tclassName=\"messageArea\"\r\n\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\trows=\"6\"\r\n\t\t\t\t\tid=\"message\"\r\n\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\tvalue={newMessage.message}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tonKeyPress={onKeyPress}\r\n\t\t\t\t></textarea>\r\n\t\t\t</fieldset>\r\n\r\n\t\t\t<div className={\"buttonsDiv\"}>\r\n\t\t\t\t<button disabled={loadingMessages || !userLogged} type=\"submit\">\r\n\t\t\t\t\tENVIAR\r\n\t\t\t\t</button>\r\n\t\t\t\t<button disabled={loadingMessages || !userLogged} onClick={handleLogOut}>\r\n\t\t\t\t\tCerrar Sesión\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<p className=\"notification\">{notification}</p>\r\n\t\t</form>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport MessageForm from \"./MessageForm\";\r\n\r\nimport \"./FormsContainer.scss\";\r\n\r\nexport default function FormsContainer() {\r\n\treturn (\r\n\t\t<div className={\"formsContainer\"}>\r\n\t\t\t<LoginForm />\r\n\t\t\t<MessageForm />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { FiTrash } from \"react-icons/fi\";\r\n\r\nimport \"./Messages.scss\";\r\n\r\nexport default function Message({ message, displayDelete, handleDelete }) {\r\n\treturn (\r\n\t\t<div className=\"message\">\r\n\t\t\t<label className={message.color}>{message.nickname}</label>\r\n\t\t\t{displayDelete && (\r\n\t\t\t\t<FiTrash\r\n\t\t\t\t\tclassName=\"deleteButton\"\r\n\t\t\t\t\tsize=\"25px\"\r\n\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thandleDelete(message.id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<p>{message.message}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useMessagesContext } from \"../../Contexts/MessagesContext\";\r\nimport { useUserContext } from \"../../Contexts/UserContext\";\r\n\r\nimport Message from \"./Message\";\r\nimport \"./MessagesContainer.scss\";\r\n\r\nexport default function MessagesContainer() {\r\n\tconst { loadingMessages, messages, deleteMessage } = useMessagesContext();\r\n\tconst { adminLogged } = useUserContext();\r\n\r\n\tconst handleDelete = (id) => {\r\n\t\tif (adminLogged) deleteMessage(id);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst messagesContainer = document.querySelector(\".messagesContainer\");\r\n\t\tmessagesContainer.scrollTo(0, messagesContainer.scrollHeight);\r\n\t}, [messages]);\r\n\r\n\treturn (\r\n\t\t<div className=\"messagesContainer\">\r\n\t\t\t{loadingMessages && <h3>Cargando...</h3>}\r\n\t\t\t{messages &&\r\n\t\t\t\tmessages.map((message) => (\r\n\t\t\t\t\t<Message\r\n\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\tmessage={message}\r\n\t\t\t\t\t\tdisplayDelete={adminLogged}\r\n\t\t\t\t\t\thandleDelete={handleDelete}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { React } from \"react\";\r\nimport { MessagesProvider } from \"../Contexts/MessagesContext.js\";\r\nimport { UserProvider } from \"../Contexts/UserContext.js\";\r\nimport FormsContainer from \"./FormsContainer/FormsContainer.js\";\r\nimport MessagesContainer from \"./MessagesContainer/MessagesContainer\";\r\nimport \"./ChatContainer.scss\";\r\n\r\nexport default function ChatContainer() {\r\n\treturn (\r\n\t\t<MessagesProvider>\r\n\t\t\t<UserProvider>\r\n\t\t\t\t<div className={\"chatContainer\"}>\r\n\t\t\t\t\t<h2> CHAT </h2>\r\n\t\t\t\t\t<section className=\"chatSection\">\r\n\t\t\t\t\t\t<FormsContainer />\r\n\r\n\t\t\t\t\t\t<MessagesContainer />\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\r\n\t\t\t</UserProvider>\r\n\t\t</MessagesProvider>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport ChatContainer from \"./components/ChatContainer/ChatContainer.js\";\r\nimport \"./styles/App.css\";\r\n\r\nexport default function App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<ChatContainer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"./model/database.js\";\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}