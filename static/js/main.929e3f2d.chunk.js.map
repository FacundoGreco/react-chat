{"version":3,"sources":["model/database.js","model/model.js","components/Contexts/MessagesContext.js","components/Contexts/UserContext.js","components/ChatContainer/FormsContainer/LoginForm.js","components/ChatContainer/FormsContainer/MessageForm.js","components/ChatContainer/FormsContainer/FormsContainer.js","components/ChatContainer/MessagesContainer/Message.js","components/ChatContainer/MessagesContainer/MessagesContainer.js","components/ChatContainer/ChatContainer.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","firestore","getMessages","setMessages","a","collection","orderBy","onSnapshot","querySnapshot","chatHistory","forEach","doc","push","id","data","console","log","Error","saveMessages","message","set","saveNewUser","newUser","verifyUser","username","password","where","get","user","docs","saveUserPrefs","nickname","color","update","deleteMessageFromDb","delete","MessagesContext","createContext","useMessagesContext","useContext","MessagesProvider","children","useState","loadingMessages","setloadingMessages","messages","notification","setNotification","loadMessages","setTimeout","sendMessage","newMessage","date","Date","deleteMessage","useEffect","Provider","value","UserContext","useUserContext","UserProvider","userLogged","setUserLogged","adminLogged","setAdminLogged","userPrefs","setUserPrefs","registerUser","loginUser","userData","admin","changeUserPrefs","logOutUser","LoginForm","setUser","onChange","e","target","name","validateInputs","className","htmlFor","type","onClick","preventDefault","MessageForm","setNewMessage","handleSubmit","colorOption","document","querySelector","selected","onSubmit","disabled","cols","rows","onKeyPress","which","keyCode","shiftKey","FormsContainer","Message","displayDelete","handleDelete","size","MessagesContainer","messagesContainer","scrollTo","scrollHeight","map","ChatContainer","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.929e3f2d.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyB3eTixPwzFobVTrmom_vQpOnP3wZ5hkuA\",\r\n\tauthDomain: \"react-chat-9e283.firebaseapp.com\",\r\n\tdatabaseURL: \"https://react-chat-9e283-default-rtdb.firebaseio.com\",\r\n\tprojectId: \"react-chat-9e283\",\r\n\tstorageBucket: \"react-chat-9e283.appspot.com\",\r\n\tmessagingSenderId: \"178991264140\",\r\n\tappId: \"1:178991264140:web:bdfebce71e614ef73626a9\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const db = firebase.firestore();\r\n","import { db } from \"./database.js\";\r\n\r\nasync function getMessages(setMessages) {\r\n\ttry {\r\n\t\tdb.collection(\"messages\")\r\n\t\t\t.orderBy(\"date\", \"asc\")\r\n\t\t\t.onSnapshot((querySnapshot) => {\r\n\t\t\t\tconst chatHistory = [];\r\n\r\n\t\t\t\tquerySnapshot.forEach((doc) => {\r\n\t\t\t\t\tchatHistory.push({ id: doc.id, ...doc.data() });\r\n\t\t\t\t});\r\n\t\t\t\tsetMessages(chatHistory);\r\n\t\t\t});\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"Los mensajes no se pudieron cargar\");\r\n\t}\r\n}\r\n\r\nasync function saveMessages(message) {\r\n\ttry {\r\n\t\tawait db.collection(\"messages\").doc().set(message);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El mensaje no se pudo enviar.\");\r\n\t}\r\n}\r\n\r\nasync function saveNewUser(newUser) {\r\n\ttry {\r\n\t\tawait db.collection(\"users\").doc().set(newUser);\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El usuario no se pudo registrar.\");\r\n\t}\r\n}\r\n\r\nasync function verifyUser({ username, password }) {\r\n\ttry {\r\n\t\tconst user = await db\r\n\t\t\t.collection(\"users\")\r\n\t\t\t.where(\"username\", \"==\", username)\r\n\t\t\t.where(\"password\", \"==\", password)\r\n\t\t\t.get();\r\n\r\n\t\tif (user.docs[0]) {\r\n\t\t\treturn { id: user.docs[0].id, ...user.docs[0].data() };\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"El usuario no se pudo validar.\");\r\n\t}\r\n}\r\n\r\nasync function saveUserPrefs(id, nickname, color) {\r\n\ttry {\r\n\t\tawait db.collection(\"users\").doc(id).update({ nickname: nickname, color: color });\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"No se pudieron guardar las preferencias.\");\r\n\t}\r\n}\r\n\r\nasync function deleteMessageFromDb(id) {\r\n\ttry {\r\n\t\tawait db.collection(\"messages\").doc(id).delete();\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t\tthrow new Error(\"No se pudo eliminar el mensaje.\");\r\n\t}\r\n}\r\n\r\nexport { getMessages, saveMessages, saveNewUser, verifyUser, saveUserPrefs, deleteMessageFromDb };\r\n","import React, { createContext, useContext, useState, useEffect } from \"react\";\r\nimport { getMessages, saveMessages, deleteMessageFromDb } from \"../../model/model.js\";\r\n\r\nexport const MessagesContext = createContext();\r\nexport const useMessagesContext = () => useContext(MessagesContext);\r\n\r\nexport function MessagesProvider({ children }) {\r\n\tconst [loadingMessages, setloadingMessages] = useState(true);\r\n\tconst [messages, setMessages] = useState([]);\r\n\tconst [notification, setNotification] = useState(\"\");\r\n\r\n\tconst loadMessages = async () => {\r\n\t\ttry {\r\n\t\t\tawait getMessages(setMessages);\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetloadingMessages(false);\r\n\t\t\t}, 500);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst sendMessage = async (newMessage) => {\r\n\t\tsetNotification(\"\");\r\n\r\n\t\tconst message = {\r\n\t\t\tdate: new Date(),\r\n\t\t\tnickname: newMessage.nickname,\r\n\t\t\tcolor: newMessage.color,\r\n\t\t\tmessage: newMessage.message,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tawait saveMessages(message);\r\n\t\t\tsetNotification(\"Mensaje enviado\");\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst deleteMessage = async (id) => {\r\n\t\tsetNotification(\"\");\r\n\r\n\t\ttry {\r\n\t\t\tawait deleteMessageFromDb(id);\r\n\t\t\tsetNotification(\"Mensaje eliminado.\");\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(\"No se pudo eliminar el mensaje.\");\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tloadMessages();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<MessagesContext.Provider\r\n\t\t\tvalue={{ loadingMessages, messages, notification, setNotification, sendMessage, deleteMessage }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</MessagesContext.Provider>\r\n\t);\r\n}\r\n","import React, { createContext, useContext, useState } from \"react\";\r\nimport { saveNewUser, saveUserPrefs, verifyUser } from \"../../model/model\";\r\n\r\nexport const UserContext = createContext();\r\nexport const useUserContext = () => useContext(UserContext);\r\n\r\nexport function UserProvider({ children }) {\r\n\tconst [notification, setNotification] = useState(\"\");\r\n\tconst [userLogged, setUserLogged] = useState(false);\r\n\tconst [adminLogged, setAdminLogged] = useState(false);\r\n\tconst [userPrefs, setUserPrefs] = useState({ id: \"\", nickname: \"\", color: \"white\" });\r\n\r\n\tconst registerUser = async (newUser) => {\r\n\t\tsetNotification(\"\");\r\n\t\tsetUserLogged(false);\r\n\r\n\t\ttry {\r\n\t\t\tawait saveNewUser({ ...newUser, nickname: \"\", color: \"white\" });\r\n\t\t\tsetNotification(\"Usuario creado. Logueate!\");\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst loginUser = async (user) => {\r\n\t\tsetNotification(\"\");\r\n\t\tsetUserLogged(false);\r\n\r\n\t\ttry {\r\n\t\t\tconst userData = await verifyUser(user);\r\n\r\n\t\t\tif (userData) {\r\n\t\t\t\tsetUserPrefs({ id: userData.id, nickname: userData.nickname, color: userData.color });\r\n\t\t\t\tsetUserLogged(true);\r\n\t\t\t\tsetAdminLogged(userData.admin === true);\r\n\t\t\t\tsetNotification(\"Has iniciado sesión!\");\r\n\t\t\t} else {\r\n\t\t\t\tsetNotification(\"Usuario o contraseña incorrecto/s.\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst logOutUser = () => {\r\n\t\tsetUserLogged(false);\r\n\t\tsetUserPrefs({ id: \"\", nickname: \"\", color: \"white\" });\r\n\t\tsetNotification(\"Ha cerrado sesión.\");\r\n\t};\r\n\r\n\tconst changeUserPrefs = async (nickname, color) => {\r\n\t\ttry {\r\n\t\t\tawait saveUserPrefs(userPrefs.id, nickname, color);\r\n\t\t\tsetUserPrefs({ nickname: nickname, color: color });\r\n\t\t\tsetNotification(\"\");\r\n\t\t} catch (error) {\r\n\t\t\tsetNotification(\"No se pudieron guardar las preferencias.\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<UserContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tnotification,\r\n\t\t\t\tsetNotification,\r\n\t\t\t\tregisterUser,\r\n\t\t\t\tloginUser,\r\n\t\t\t\tuserLogged,\r\n\t\t\t\tadminLogged,\r\n\t\t\t\tuserPrefs,\r\n\t\t\t\tlogOutUser,\r\n\t\t\t\tchangeUserPrefs,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</UserContext.Provider>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useUserContext } from \"../../Contexts/UserContext\";\r\nimport \"./LoginForm.scss\";\r\n\r\nexport default function LoginForm() {\r\n\tconst { registerUser, loginUser, notification, setNotification } = useUserContext();\r\n\r\n\tconst [user, setUser] = useState({\r\n\t\tusername: \"\",\r\n\t\tpassword: \"\",\r\n\t});\r\n\r\n\tconst onChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tsetUser({ ...user, [name]: value });\r\n\t};\r\n\r\n\tconst validateInputs = () => {\r\n\t\tif (!user.username) {\r\n\t\t\tsetNotification(\"El usuario está vacío.\");\r\n\t\t\treturn false;\r\n\t\t} else if (!user.password) {\r\n\t\t\tsetNotification(\"La contraseña está vacía.\");\r\n\t\t\treturn false;\r\n\t\t} else return true;\r\n\t};\r\n\r\n\tconst handleRegister = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (validateInputs()) {\r\n\t\t\tregisterUser(user);\r\n\t\t\tsetUser({ ...user, password: \"\" });\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleLogin = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (validateInputs()) {\r\n\t\t\tloginUser(user);\r\n\t\t\tsetUser({ ...user, password: \"\" });\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form className={\"loginForm\"}>\r\n\t\t\t<fieldset className={\"loginData\"}>\r\n\t\t\t\t<label htmlFor=\"username\">Usuario</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"usernameInput\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\tvalue={user.username}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<label htmlFor=\"password\">Contraseña</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName=\"passwordInput\"\r\n\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\tvalue={user.password}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t/>\r\n\t\t\t</fieldset>\r\n\r\n\t\t\t<div className={\"buttonsDiv\"}>\r\n\t\t\t\t<button onClick={handleLogin}> Login </button>\r\n\t\t\t\t<button onClick={handleRegister}> Registrarse </button>\r\n\t\t\t</div>\r\n\t\t\t<p className=\"notification\">{notification}</p>\r\n\t\t</form>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useUserContext } from \"../../Contexts/UserContext\";\r\nimport { useMessagesContext } from \"../../Contexts/MessagesContext\";\r\nimport \"./MessageForm.scss\";\r\n\r\nexport default function MessageForm() {\r\n\tconst { userLogged, userPrefs, logOutUser, changeUserPrefs } = useUserContext();\r\n\tconst { loadingMessages, notification, setNotification, sendMessage } = useMessagesContext();\r\n\r\n\tconst [newMessage, setNewMessage] = useState({\r\n\t\tnickname: \"\",\r\n\t\tcolor: \"white\",\r\n\t\tmessage: \"\",\r\n\t});\r\n\r\n\tconst onKeyPress = (e) => {\r\n\t\tconst keyCode = e.which || e.keyCode;\r\n\r\n\t\tif (keyCode === 13 && !e.shiftKey) {\r\n\t\t\te.preventDefault();\r\n\t\t\thandleSubmit();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onChange = (e) => {\r\n\t\tconst { name, value } = e.target;\r\n\t\tsetNewMessage({ ...newMessage, [name]: value });\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\tif (e) e.preventDefault();\r\n\r\n\t\tif (loadingMessages) return;\r\n\t\tif (!newMessage.nickname) return setNotification(\"No ha ingresado un nickname.\");\r\n\t\tif (!newMessage.message) return setNotification(\"No ha escrito ningún mensaje.\");\r\n\r\n\t\tsendMessage(newMessage);\r\n\t\tsetNewMessage({ ...newMessage, message: \"\" });\r\n\t\tchangeUserPrefs(newMessage.nickname, newMessage.color);\r\n\t};\r\n\r\n\tconst handleLogOut = (e) => {\r\n\t\te.preventDefault();\r\n\t\tlogOutUser();\r\n\t};\r\n\r\n\t//SETS USER NICKNAME AND COLOR\r\n\tuseEffect(() => {\r\n\t\tsetNewMessage({ nickname: userPrefs.nickname, color: userPrefs.color, message: \"\" });\r\n\t}, [userPrefs]);\r\n\r\n\t//SETS COLOR SELECTED\r\n\tuseEffect(() => {\r\n\t\tconst colorOption = document.querySelector(`.colorPicker option[value=${newMessage.color}]`);\r\n\t\tcolorOption && (colorOption.selected = true);\r\n\t}, [newMessage.color]);\r\n\r\n\treturn (\r\n\t\t<form className=\"messageForm\" onSubmit={handleSubmit}>\r\n\t\t\t<fieldset className=\"transmiterData\">\r\n\t\t\t\t<div className=\"nicknameDiv\">\r\n\t\t\t\t\t<label htmlFor=\"nickname\">Nickname</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tdisabled={!userLogged}\r\n\t\t\t\t\t\tclassName=\"nicknameInput\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tid=\"nickname\"\r\n\t\t\t\t\t\tname=\"nickname\"\r\n\t\t\t\t\t\tvalue={newMessage.nickname}\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<select disabled={!userLogged} className=\"colorPicker\" name=\"color\" id=\"color\" onChange={onChange}>\r\n\t\t\t\t\t<option value=\"white\">⚪</option>\r\n\t\t\t\t\t<option value=\"red\">🔴</option>\r\n\t\t\t\t\t<option value=\"green\">🟢</option>\r\n\t\t\t\t\t<option value=\"orange\">🟠</option>\r\n\t\t\t\t\t<option value=\"yellow\">🟡</option>\r\n\t\t\t\t\t<option value=\"blue\">🔵</option>\r\n\t\t\t\t\t<option value=\"blueviolet\">🟣</option>\r\n\t\t\t\t</select>\r\n\t\t\t</fieldset>\r\n\t\t\t<fieldset>\r\n\t\t\t\t<label htmlFor=\"message\"> Message </label>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tdisabled={!userLogged}\r\n\t\t\t\t\tclassName=\"messageArea\"\r\n\t\t\t\t\tcols=\"30\"\r\n\t\t\t\t\trows=\"6\"\r\n\t\t\t\t\tid=\"message\"\r\n\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\tvalue={newMessage.message}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\tonKeyPress={onKeyPress}\r\n\t\t\t\t></textarea>\r\n\t\t\t</fieldset>\r\n\r\n\t\t\t<div className={\"buttonsDiv\"}>\r\n\t\t\t\t<button disabled={loadingMessages || !userLogged} type=\"submit\">\r\n\t\t\t\t\tENVIAR\r\n\t\t\t\t</button>\r\n\t\t\t\t<button disabled={loadingMessages || !userLogged} onClick={handleLogOut}>\r\n\t\t\t\t\tCerrar Sesión\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<p className=\"notification\">{notification}</p>\r\n\t\t</form>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport LoginForm from \"./LoginForm\";\r\nimport MessageForm from \"./MessageForm\";\r\n\r\nimport \"./FormsContainer.scss\";\r\n\r\nexport default function FormsContainer() {\r\n\treturn (\r\n\t\t<div className={\"formsContainer\"}>\r\n\t\t\t<LoginForm />\r\n\t\t\t<MessageForm />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { FiTrash } from \"react-icons/fi\";\r\n\r\nimport \"./Messages.scss\";\r\n\r\nexport default function Message({ message, displayDelete, handleDelete }) {\r\n\treturn (\r\n\t\t<div className=\"message\">\r\n\t\t\t<label className={message.color}>{message.nickname}</label>\r\n\t\t\t{displayDelete && (\r\n\t\t\t\t<FiTrash\r\n\t\t\t\t\tclassName=\"deleteButton\"\r\n\t\t\t\t\tsize=\"25px\"\r\n\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\thandleDelete(message.id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t<p>{message.message}</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useMessagesContext } from \"../../Contexts/MessagesContext\";\r\nimport { useUserContext } from \"../../Contexts/UserContext\";\r\n\r\nimport Message from \"./Message\";\r\nimport \"./MessagesContainer.scss\";\r\n\r\nexport default function MessagesContainer() {\r\n\tconst { loadingMessages, messages, deleteMessage } = useMessagesContext();\r\n\tconst { adminLogged } = useUserContext();\r\n\r\n\tconst handleDelete = (id) => {\r\n\t\tif (adminLogged) deleteMessage(id);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tconst messagesContainer = document.querySelector(\".messagesContainer\");\r\n\t\tmessagesContainer.scrollTo(0, messagesContainer.scrollHeight);\r\n\t}, [messages]);\r\n\r\n\treturn (\r\n\t\t<div className=\"messagesContainer\">\r\n\t\t\t{loadingMessages && <h3>Cargando...</h3>}\r\n\t\t\t{messages &&\r\n\t\t\t\tmessages.map((message) => (\r\n\t\t\t\t\t<Message\r\n\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\tmessage={message}\r\n\t\t\t\t\t\tdisplayDelete={adminLogged}\r\n\t\t\t\t\t\thandleDelete={handleDelete}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { React } from \"react\";\r\nimport { MessagesProvider } from \"../Contexts/MessagesContext.js\";\r\nimport { UserProvider } from \"../Contexts/UserContext.js\";\r\nimport FormsContainer from \"./FormsContainer/FormsContainer.js\";\r\nimport MessagesContainer from \"./MessagesContainer/MessagesContainer\";\r\nimport \"./ChatContainer.scss\";\r\n\r\nexport default function ChatContainer() {\r\n\treturn (\r\n\t\t<MessagesProvider>\r\n\t\t\t<UserProvider>\r\n\t\t\t\t<div className={\"chatContainer\"}>\r\n\t\t\t\t\t<h2> CHAT </h2>\r\n\t\t\t\t\t<section className=\"chatSection\">\r\n\t\t\t\t\t\t<FormsContainer />\r\n\r\n\t\t\t\t\t\t<MessagesContainer />\r\n\t\t\t\t\t</section>\r\n\t\t\t\t</div>\r\n\t\t\t</UserProvider>\r\n\t\t</MessagesProvider>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport ChatContainer from \"./components/ChatContainer/ChatContainer.js\";\r\nimport \"./styles/App.css\";\r\n\r\nexport default function App() {\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<ChatContainer />\r\n\t\t</div>\r\n\t);\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"./model/database.js\";\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}