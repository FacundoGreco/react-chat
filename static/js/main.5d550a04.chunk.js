(this["webpackJsonpprimer-app"]=this["webpackJsonpprimer-app"]||[]).push([[0],{23:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n.n(a),s=n(18),r=n.n(s),o=(n(23),n(13)),i=n(9),l=n(7),u=n.n(l),j=n(12),b=n(10),m=n(15);n(33);m.a.initializeApp({apiKey:"AIzaSyB3eTixPwzFobVTrmom_vQpOnP3wZ5hkuA",authDomain:"react-chat-9e283.firebaseapp.com",databaseURL:"https://react-chat-9e283-default-rtdb.firebaseio.com",projectId:"react-chat-9e283",storageBucket:"react-chat-9e283.appspot.com",messagingSenderId:"178991264140",appId:"1:178991264140:web:bdfebce71e614ef73626a9"});var p=m.a.firestore();function d(e){return h.apply(this,arguments)}function h(){return(h=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,p.collection("messages").orderBy("date","asc").onSnapshot((function(e){var n=[];e.forEach((function(e){n.push(Object(i.a)({id:e.id},e.data()))})),t(n)})),e.next=8;break;case 4:throw e.prev=4,e.t0=e.catch(0),console.log(e.t0),new Error("Los mensajes no se pudieron cargar");case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.collection("messages").doc().set(t);case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),console.log(e.t0),new Error("El mensaje no se pudo enviar.");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}n(26);var O=n(2);function v(e){var t=e.loadingMessages,n=e.newMessage,c=e.notification,s=e.onChange,r=e.sendMessage,o=Object(a.useState)(!0),i=Object(b.a)(o,2),l=i[0],u=i[1];Object(a.useEffect)((function(){var e=document.querySelector(".colorPicker option[value=".concat(n.color,"]"));e&&(e.selected=!0)}),[n.color]),Object(a.useEffect)((function(){u(t)}),[t]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("form",{className:"inputContainer",onSubmit:r,children:[Object(O.jsxs)("fieldset",{className:"transmiterData",children:[Object(O.jsxs)("div",{className:"nicknameDiv",children:[Object(O.jsx)("label",{htmlFor:"nickname",children:"Nickname"}),Object(O.jsx)("input",{className:"nicknameInput",type:"text",id:"nickname",name:"nickname",value:n.nickname,onChange:s})]}),Object(O.jsxs)("select",{className:"colorPicker",name:"color",id:"color",onChange:s,children:[Object(O.jsx)("option",{value:"white",children:"\u26aa"}),Object(O.jsx)("option",{value:"red",children:"\ud83d\udd34"}),Object(O.jsx)("option",{value:"green",children:"\ud83d\udfe2"}),Object(O.jsx)("option",{value:"orange",children:"\ud83d\udfe0"}),Object(O.jsx)("option",{value:"yellow",children:"\ud83d\udfe1"}),Object(O.jsx)("option",{value:"blue",children:"\ud83d\udd35"}),Object(O.jsx)("option",{value:"blueviolet",children:"\ud83d\udfe3"})]})]}),Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("label",{htmlFor:"message",children:" Message "}),Object(O.jsx)("textarea",{className:"messageArea",cols:"30",rows:"6",id:"message",name:"message",value:n.message,onChange:s,onKeyPress:function(e){13!==(e.which||e.keyCode)||e.shiftKey||(e.preventDefault(),r())}})]}),Object(O.jsx)("button",{disabled:l,children:" ENVIAR "}),Object(O.jsx)("p",{className:"notification",children:c})]})})}n(28);function x(e){var t=e.message;return Object(O.jsxs)("div",{className:"message",children:[Object(O.jsx)("label",{className:t.color,children:t.nickname}),Object(O.jsx)("p",{children:t.message})]})}n(29);function k(e){var t=e.loadingMessages,n=e.messages;return Object(a.useEffect)((function(){var e=document.querySelector(".messagesContainer");e.scrollTo(0,e.scrollHeight)}),[n]),Object(O.jsxs)("div",{className:"messagesContainer",children:[t&&Object(O.jsx)("h3",{children:"Cargando..."}),n&&n.map((function(e){return Object(O.jsx)(x,{message:e},e.id)}))]})}n(30);function w(){var e=Object(a.useState)(!0),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),r=Object(b.a)(s,2),l=r[0],m=r[1],p=Object(a.useState)(""),h=Object(b.a)(p,2),g=h[0],x=h[1],w=Object(a.useState)({nickname:localStorage.getItem("nickname"),color:localStorage.getItem("color"),message:""}),S=Object(b.a)(w,2),y=S[0],N=S[1],C=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(m);case 3:setTimeout((function(){c(!1)}),500),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),x(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){C()}),[]);var I=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),!n){e.next=3;break}return e.abrupt("return");case 3:if(y.message){e.next=7;break}return e.abrupt("return",x("No ha escrito ning\xfan mensaje."));case 7:x("");case 8:return a={date:new Date,nickname:y.nickname,color:y.color,message:y.message},N(Object(i.a)(Object(i.a)({},y),{},{message:""})),e.prev=10,e.next=13,f(a);case 13:x("Mensaje enviado"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(10),console.log(e.t0),x(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"container chatContainer",children:[Object(O.jsx)("h2",{children:" CHAT "}),Object(O.jsxs)("section",{className:"chatSection",children:[Object(O.jsx)(v,{loadingMessages:n,newMessage:y,notification:g,onChange:function(e){var t=e.target,n=t.name,a=t.value;N(Object(i.a)(Object(i.a)({},y),{},Object(o.a)({},n,a))),"nickname"===n&&localStorage.setItem("nickname",a),"color"===n&&localStorage.setItem("color",a)},sendMessage:I}),Object(O.jsx)(k,{loadingMessages:n,messages:l})]})]})}n(31);function S(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(w,{})})}var y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),y()}},[[32,1,2]]]);
//# sourceMappingURL=main.5d550a04.chunk.js.map